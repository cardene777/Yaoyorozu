# Yaoyorozu

## 概要

Japan Open Chain上の日本円ステーブルコインクロスチェーンスワッププロトコル。
今後Japan Open Chain上に日本円にペグしたステーブルコインが作られた時に、他のチェーンにそのトークンを移動が可能になります。
また、Web2ユーザーなどができる限り簡単にオンボーディングしやすいようにコントラクトアカウントの実装をしています。
クロスチェーンスワップについては、LayerZeroを使用して実現。

## Yaoyorozuの由来

日本には古くから「**八百万の神**」と称されるようにたくさんの神々がいます。
これになぞって、さまざまなブロックチェーン上でステーブルコインを扱うことができるようにすることを意味して「**Yaoyorozu**」という名前がついています。

## コントラクトアカウント

ERC4337形式でコントラクトアカウントを作成。
誰でもユニークかつ簡単に作成できるように、メールアドレス（Google）を入力することで生成します。
メールアドレスをそのまま使用するとブロックチェーン上に公開されてしまうため、メールアドレスとユーザー名をハッシュ化して使用します。
また、メールアドレスを入力するだけでは他の人でも該当のメールアドレスを使用してコントラクトアカウントの作成・アクセスできてしまうため、Googleの認証を利用してコントラクトアカウントの作成・アクセスができるように管理します。
これにより、Googleのセキュリティを使用しながらコントラクトアカウントを安全に管理可能になります。

コントラクトアカウントはEOAアカウントと異なり、各対応チェーン上にコントラクトアカウント生成コントラクトをデプロイする必要があります。
さらに、各対応チェーン上に各ユーザーのコントラクトアカウントをデプロイする必要があります。
この時、コントラクトアドレスが各チェーンで異なってしまうとユーザーが混乱してしまう。
そのため、create2などの仕組みを使用して、EVM互換チェーンで同じアドレスになるようにします。
また、これにより対応チェーンが増えた場合でもユーザーは気にすることなく使用できます。

ガス代は運営が負担することで、ユーザーはWeb2のサービスを使用するようにログインやトークンの交換ができます。

## クロスチェーンスワップ

burn/mint方式で異なるチェーンでステーブルコインを移動することができます。
各チェーンでステーブルコインをラップしたトークンコントラクトをデプロイします。
2つのチェーンを選択して、ラップしたトークンとラップしたトークンの交換、ラップしたトークンとJOC上のステーブルコインの交換を行います。
交換にはLayerZeroを使用します。

## 実装予定

### EOAアドレスへの対応

既にEOAアドレスを使用しているユーザーがEOAアドレスでそのままログインできるように実装予定。
EOAアドレスを既に保有しているユーザーがからすると、新たにウォレットを作成して管理するウォレットが増えるのは嬉しくないため、EOAアドレスも使用できるようにすることで窓口を広げつつより柔軟にユーザー対応が可能になります。

### EVM互換チェーンでのコントラクトアドレス

各EVM互換チェーン上でコントラクトアドレスが異なることで、ユーザーが混乱してしまいます。
そのため、create2を使用してEVM互換チェーン上でコントラクトアドレスが同じになるようにします。

## 課題点

### ガス代の供給

ユーザーのガス代を負担しているため、この負担分をどこで補うかを考えているところです。
